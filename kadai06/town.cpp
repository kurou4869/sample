/*******************************************************************************
* タイトル:		townプログラム
* プログラム名:	town.cpp
* 作成者:		gp11b341 11 kurosawa yuta
* 作成日:		2018/04/16
*******************************************************************************/


/*******************************************************************************
* インクルードファイル
*******************************************************************************/
#include "main.h"
#include "town.h"
#include "player.h"
#include "bukiya.h"

/*******************************************************************************
* マクロ定義
*******************************************************************************/


/*******************************************************************************
* 構造体定義
*******************************************************************************/


/*******************************************************************************
* プロトタイプ宣言
*******************************************************************************/


/*******************************************************************************
* グローバル変数
*******************************************************************************/
char town[TATE_MAX][FW_MAX + 1] = { // 横を+1しているのは文末のNULLの分
	"*******************************************************************************",
	"*家                 *         *家　            *            *家　             *",
	"*        ／￣￣＼   *         *     ／￣￣＼   *            *     ／￣￣＼    *",
	"*         |田 .|    *         *      |田 .|    *            *      |田 .|     *",
	"*********************         ******************            *******************",
	"*                                                                             *",
	"*********************                                       *******************",
	"*家                 *                                       *家               *",
	"*        ／￣￣＼   *                                       *     ／￣￣＼    *",
	"*         |田 .|    *         ******************            *      |田 .|     *",
	"*********************         *武器屋  　　    *            *******************",
	"*                             *     ／￣￣＼   *                              *",
	"*********************         *      |田 .|    *            *******************",
	"*家                 *         *********  *******            *家               *",
	"*        ／￣￣＼   *                                       *     ／￣￣＼    *",
	"*         |田 .|    *                                       *      |田 .|     *",
	"*********************                                       *******************",
	"*                                                                             *",
	"*                                                                             *",
	"*                                                                             *",
	"*                                                                             *",
	"*                                                                             *",
	"*                                                                             *",
	"*******************************************************************************",
};



/*******************************************************************************
関数名:	void DrawTown( void )
引数:	void
戻り値:	void
説明:	街の描画処理
*******************************************************************************/

void DrawTown(void)
{
	PLAYER *player = GetPlayerAdr(0);
	int y;
	

	/* 画面描画処理 */
	for (y = 0; y < FH_MAX; y++)
	{
		printf("%s\n", &town[y][0]);
	}



	if ((player->fx == 39 ) && (player->fy == 14) || (player->fx == 40) && (player->fy == 14))
	{
		DrawBukiya();
		player->flag++;
		player->LV = 1;
		// ここでバトル関数へ飛ぶ
		system("cls");
	}

	//キー入力待ち
	rewind(stdin);
	_getch();

	
}

/*******************************************************************************
関数名:	char *GetMaTownpAdr( void )
引数:	int y : Y座標
int x : X座標
戻り値:	char *
説明:	フィールドのアドレスを取得する
*******************************************************************************/
char *GetTownAdr(int y, int x)
{
	return &town[y][x];
}