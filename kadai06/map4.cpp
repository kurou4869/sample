/*******************************************************************************
* タイトル:		map4プログラム
* プログラム名:	battle.cpp
* 作成者:		gp11b341 11 kurosawa yuta
* 作成日:		2018/04/16
*******************************************************************************/

/*******************************************************************************
* インクルードファイル
*******************************************************************************/
#include "main.h"
#include "map4.h"
#include "battle.h"
#include "player.h"
#include "enemy.h"
#include "title.h"
#include "end.h"
/*******************************************************************************
* マクロ定義
*******************************************************************************/


/*******************************************************************************
* 構造体定義
*******************************************************************************/


/*******************************************************************************
* グローバル変数
*******************************************************************************/
char map4[FH_MAX][FW_MAX + 1] = { // 横を+1しているのは文末のNULLの分
	"*******************************************************************************",
	"*       *************                                     ****** STAGE 04 *****",
	"*       *************                                     *********************",
	"*       *************                                     ******   ENEMY   ****",
	"*********************                                     ******   魔王    ****",
	"*********************                                     *********************",
	"*       *****      **                                     *       *****       *",
	"*       *****      **                                     *       *****       *",
	"*       *****      **                                     *       *****       *",
	"*       *****      **                                     *********************",
	"*       *****      **                                     *********************",
	"*       *****      **                                     *       *****       *",
	"*       *****      **                                     *       *****       *",
	"*       *****      **                                     *       *****       *",
	"*       *****      **                                     *********************",
	"*       *****      **                                     *********************",
	"*       *****      **                                     *       *****       *",
	"*       *****      **                                     *       *****       *",
	"*       *****      **                                     *       *****       *",
	"*       *****      **                                     *********************",
	"*       *****      **                                     *****            ****",
	"*       *****      **                                     *****            ****",
	"*********************                                     *****            ****",
	"*******************************************************************************",
};


/*******************************************************************************
関数名:	void DrawMap4( void )
引数:	void
戻り値:	void
説明:	マップの描画処理
*******************************************************************************/
void DrawMap4(void)
{
	int i;
	PLAYER *player = GetPlayerAdr(0);
	ENEMY *enemy = GetEnemyAdr(0);



	/* 画面クリア */
	system("cls");

	/* マップ描画処理 */
	for (i = 0; i < FH_MAX; i++)
	{
		printf("%s\n", &map4[i][0]);

	}




	if ((player->fx == enemy->fx) && (player->fy == enemy->fy))
	{
		printf("モンスターと遭遇した!!");
		rewind(stdin);
		_getch();

		// ここでバトル関数へ飛ぶ
		system("cls");
		DrawBattle();
		if (player->HP == 0)
		{
			InitPlayer();
			InitEnemy();

			DrawTitle();
		}
		else
		{
			DrawEnd();

		}

	}
	else
	{
		printf("Push Key ← → ↑↓                 1:SaveData   2:LoadData");
	}
}


/*******************************************************************************
関数名:	char *GetMap4Adr( void )
引数:	int y : Y座標
int x : X座標
戻り値:	char *
説明:	フィールドのアドレスを取得する
*******************************************************************************/
char *GetMap4Adr(int y, int x)
{
	return &map4[y][x];
}